{"version":3,"file":"vgmusic.js","sources":["../../src/module/applications/music-config.mjs","../../src/module/settings.mjs","../../src/module/preloadTemplates.mjs","../../src/module/patch/actor-sheet.mjs","../../src/module/patch/combat.mjs","../../src/module/patch/scene-controls.mjs","../../src/module/utils/lib.mjs","../../src/module/utils/music-controller.mjs","../../src/module/utils/playlists.mjs","../../src/module/config.mjs","../../src/module/controls.mjs","../../src/module/vgmusic.mjs"],"sourcesContent":["export class VGMusicConfig extends FormApplication {\n  constructor(object, options) {\n    super(object || game.settings.get(\"vgmusic\", \"defaultMusic\"), options);\n\n    if (this.object.apps != null) this.object.apps[this.appId] = this;\n  }\n\n  static get defaultOptions() {\n    return mergeObject(super.defaultOptions, {\n      title: game.i18n.localize(\"VGMusic.SceneMusic\"),\n      classes: [\"scene-music\"],\n      width: 480,\n      height: 360,\n      template: \"modules/vgmusic/templates/apps/music-config.hbs\",\n      closeOnSubmit: false,\n      submitOnClose: true,\n      submitOnChange: true,\n      resizable: true,\n      dragDrop: [{ dropSelector: \".playlist\" }],\n    });\n  }\n\n  get updateDataPrefix() {\n    if (this.isDocument) return \"flags.vgmusic\";\n    return \"data.vgmusic\";\n  }\n\n  get isDocument() {\n    return this.object instanceof foundry.abstract.Document;\n  }\n\n  get data() {\n    return getProperty(this.object, this.updateDataPrefix);\n  }\n\n  async updateObject(data) {\n    // Turn update data follow a valid schema for the object\n    data = Object.entries(data).reduce((cur, o) => {\n      const key = `${this.updateDataPrefix}.${o[0]}`;\n      cur[key] = o[1];\n\n      return cur;\n    }, {});\n\n    // Handle Document\n    if (this.isDocument) return this.object.update(data);\n\n    // Handle config\n    if (this.object.documentName === \"DefaultMusic\") {\n      const prevData = game.settings.get(\"vgmusic\", \"defaultMusic\");\n      const updateData = foundry.utils.mergeObject(prevData, foundry.utils.expandObject(data), {\n        inplace: false,\n        performDeletions: true,\n      });\n\n      await game.settings.set(\"vgmusic\", \"defaultMusic\", updateData);\n      this.object = game.settings.get(\"vgmusic\", \"defaultMusic\");\n      return this.render();\n    }\n  }\n\n  async _onDrop(event) {\n    event.preventDefault();\n    const section = event.currentTarget.dataset.section;\n\n    const data = JSON.parse(event.dataTransfer.getData(\"text/plain\"));\n    if (![\"Playlist\", \"PlaylistSound\"].includes(data.type)) return;\n    if (!data.uuid) return;\n\n    const document = await fromUuid(data.uuid);\n    let playlist, sound;\n    if (document instanceof PlaylistSound) {\n      playlist = document.parent;\n      sound = document;\n    } else {\n      playlist = document;\n    }\n\n    const sectionConfig = CONFIG.VGMusic.playlistSections[this.object.documentName][section];\n    const prio = sectionConfig.priority;\n\n    const prevData = getProperty(this.data, `music.${section}`);\n    const prefix = `music.${section}`;\n    const updateData = {\n      [`${prefix}.playlist`]: playlist.id,\n      [`${prefix}.initialTrack`]: sound ? sound.id : \"\",\n    };\n    if (prevData?.priority == null) updateData[`${prefix}.priority`] = prio;\n\n    await this.updateObject(updateData);\n  }\n\n  async getData() {\n    const data = await super.getData();\n\n    // Add playlist sections\n    const sections = CONFIG.VGMusic.playlistSections[this.object.documentName];\n    data.playlists = Object.entries(sections).map((o) => {\n      const [k, v] = o;\n      const playlist = game.playlists.get(getProperty(this.data, `music.${k}.playlist`));\n      const tracks = (playlist?.playbackOrder ?? []).map((id) => {\n        const track = playlist.sounds.get(id);\n        return {\n          id,\n          name: track.name,\n        };\n      });\n\n      return {\n        key: k,\n        label: game.i18n.localize(v.label),\n        playlist,\n        tracks,\n        data: getProperty(this.data, `music.${k}`),\n        allowPriority: true,\n      };\n    });\n\n    return data;\n  }\n\n  activateListeners(html) {\n    super.activateListeners(html);\n\n    html.find(\".playlist .control .delete\").on(\"click\", this._onDeletePlaylist.bind(this));\n    html.find(`*[data-action=\"open-playlist\"]`).on(\"click\", this._onOpenPlaylist.bind(this));\n  }\n\n  async _onDeletePlaylist(event) {\n    event.preventDefault();\n    const section = event.currentTarget.closest(\".playlist\").dataset.section;\n    await this.updateObject({ [`music.-=${section}`]: null });\n  }\n\n  _onOpenPlaylist(event) {\n    event.preventDefault();\n\n    const playlistId = event.currentTarget.closest(\".playlist\").dataset.itemId;\n    const playlist = game.playlists.get(playlistId);\n    if (playlist) playlist.sheet.render(true);\n  }\n\n  async close(...args) {\n    if (this.object.apps != null) delete this.object.apps[this.appId];\n\n    vgmusic.utils.MusicController.playCurrentTrack();\n    return super.close(...args);\n  }\n\n  async _updateObject(event, formData) {\n    event.preventDefault();\n\n    await this.updateObject(formData);\n  }\n}\n","import { VGMusicConfig } from \"./applications/_module.mjs\";\n\nexport function registerSettings() {\n  const modName = \"vgmusic\";\n\n  /**\n   * Silent Combat Music\n   */\n  game.settings.register(modName, \"silentCombatMusicMode\", {\n    name: \"VGMusic.SETTINGS.SilentCombatMusicMode.Name\",\n    hint: \"VGMusic.SETTINGS.SilentCombatMusicMode.Hint\",\n    scope: \"world\",\n    config: true,\n    type: String,\n    choices: {\n      highestPriority: game.i18n.localize(\"VGMusic.SETTINGS.SilentCombatMusicMode.Options.highestPriority\"),\n      lastActor: game.i18n.localize(\"VGMusic.SETTINGS.SilentCombatMusicMode.Options.lastActor\"),\n      area: game.i18n.localize(\"VGMusic.SETTINGS.SilentCombatMusicMode.Options.area\"),\n      generic: game.i18n.localize(\"VGMusic.SETTINGS.SilentCombatMusicMode.Options.generic\"),\n    },\n    default: \"highestPriority\",\n    onChange: () => {\n      vgmusic.utils.MusicController.playCurrentTrack();\n    },\n  });\n\n  /**\n   * Default Combat Music\n   */\n  game.settings.registerMenu(modName, \"defaultMusic\", {\n    label: \"VGMusic.SETTINGS.DefaultMusic.Label\",\n    name: \"VGMusic.SETTINGS.DefaultMusic.Name\",\n    hint: \"VGMusic.SETTINGS.DefaultMusic.Hint\",\n    icon: \"fas fa-music\",\n    type: VGMusicConfig,\n    restricted: true,\n  });\n  game.settings.register(modName, \"defaultMusic\", {\n    name: \"VGMusic.SETTINGS.DefaultMusic.Name\",\n    scope: \"world\",\n    config: false,\n    type: Object,\n    default: {\n      documentName: \"DefaultMusic\",\n      data: {\n        vgmusic: {\n          music: {},\n        },\n      },\n    },\n  });\n\n  game.settings.register(modName, \"supress.area\", {\n    name: \"supress.area\",\n    scope: \"world\",\n    config: false,\n    type: Boolean,\n    default: false,\n    onChange: () => {\n      vgmusic.utils.MusicController.playCurrentTrack();\n    },\n  });\n  game.settings.register(modName, \"supress.combat\", {\n    name: \"supress.combat\",\n    scope: \"world\",\n    config: false,\n    type: Boolean,\n    default: false,\n    onChange: () => {\n      vgmusic.utils.MusicController.playCurrentTrack();\n    },\n  });\n}\n","export async function preloadTemplates() {\n  const templatePaths = [\"modules/vgmusic/templates/apps/components/playlists.hbs\"];\n\n  return loadTemplates(templatePaths);\n}\n","export const patchActorSheet = function () {\n  const clsPath = \"ActorSheet\";\n  const cls = ActorSheet;\n\n  /* -------------------------------------- */\n  /* _getHeaderButtons\n  /* -------------------------------------- */\n  libWrapper.register(\"vgmusic\", `${clsPath}.prototype._getHeaderButtons`, function (wrapped) {\n    let buttons = wrapped();\n\n    // Add music selector\n    if (game.user.isGM) {\n      buttons.splice(0, 0, {\n        label: game.i18n.localize(\"VGMusic.CombatMusic\"),\n        class: \"configure-combat-music\",\n        icon: \"fas fa-music\",\n        onclick: (ev) => {\n          this._onConfigureCombatMusic(ev);\n        },\n      });\n    }\n\n    return buttons;\n  });\n\n  /* -------------------------------------- */\n  /* _onConfigureCombatMusic\n  /* -------------------------------------- */\n  cls.prototype._onConfigureCombatMusic = function (event) {\n    event.preventDefault();\n    new vgmusic.applications.VGMusicConfig(this.actor, {\n      top: this.position.top + 40,\n      left: this.position.left + (this.position.width - 400) / 2,\n    }).render(true);\n  };\n};\n","export const patchCombat = function () {\n  const clsPath = \"CONFIG.Combat.documentClass\";\n\n  /* -------------------------------------- */\n  /* setupTurns\n  /* -------------------------------------- */\n  libWrapper.register(\"vgmusic\", `${clsPath}.prototype.setupTurns`, function (wrapped, ...args) {\n    const result = wrapped(...args);\n\n    // Refresh combat music\n    vgmusic.utils.MusicController.playCurrentTrack();\n\n    return result;\n  });\n};\n","export const patchSceneControls = function () {\n  const clsPath = \"SceneControls\";\n\n  /* -------------------------------------- */\n  /* _getControlButtons\n  /* -------------------------------------- */\n  libWrapper.register(\"vgmusic\", `${clsPath}.prototype._getControlButtons`, function (wrapped, ...args) {\n    let result = wrapped(...args);\n\n    {\n      const tools = [\n        {\n          name: \"supress-area-music\",\n          title: \"VGMusic.SceneControls.SupressAreaMusic\",\n          icon: \"fas fa-dungeon\",\n          toggle: true,\n          active: game.settings.get(\"vgmusic\", \"supress.area\"),\n          onClick: (toggled) => {\n            game.settings.set(\"vgmusic\", \"supress.area\", toggled);\n          },\n        },\n        {\n          name: \"supress-combat-music\",\n          title: \"VGMusic.SceneControls.SupressCombatMusic\",\n          icon: \"fas fa-fist-raised\",\n          toggle: true,\n          active: game.settings.get(\"vgmusic\", \"supress.combat\"),\n          onClick: (toggled) => {\n            game.settings.set(\"vgmusic\", \"supress.combat\", toggled);\n          },\n        },\n      ];\n\n      const group = result.find((o) => o.name === \"sounds\");\n      group.tools.push(...tools);\n    }\n\n    return result;\n  });\n};\n","export const getFirstAvailableGM = function () {\n  return (game.users\n    .filter((o) => o.isGM && o.active)\n    .sort((a, b) => {\n      return a.id - b.id;\n    }) || null)[0];\n};\n\nexport const isHeadGM = function () {\n  return game.user === getFirstAvailableGM();\n};\n","export const MusicController = {\n  context: null,\n  _fadingTracks: [],\n\n  get currentCombat() {\n    return game.combats.find((o) => o.scene === this.currentScene);\n  },\n  get currentScene() {\n    return game.scenes.find((o) => o.active);\n  },\n\n  get track() {\n    return this.context?.track;\n  },\n  get currentTrackInfo() {\n    if (!this.track) return {};\n    return this.context?.scopeEntity?.getFlag(\"vgmusic\", `playlist.${this.track.parent.id}.${this.track.id}`);\n  },\n\n  get documentNameSortPriority() {\n    return [\"Actor\", \"Scene\", \"DefaultMusic\"];\n  },\n\n  getAllCurrentPlaylists() {\n    let result = [];\n\n    // Get scene area playlist\n    const scene = this.currentScene;\n    if (scene != null) {\n      const ctx = vgmusic.utils.PlaylistContext.fromDocument(scene, \"area\", scene);\n      if (ctx) result.push(ctx);\n    }\n\n    // Get combat playlists\n    const combat = this.currentCombat;\n    if (scene != null) {\n      const ctx = vgmusic.utils.PlaylistContext.fromDocument(scene, \"combat\", combat);\n      if (ctx) result.push(ctx);\n    }\n\n    // Get actor combat playlists\n    if (combat != null) {\n      for (const combatant of combat.combatants) {\n        const ctx = vgmusic.utils.PlaylistContext.fromDocument(combatant.actor, \"combat\", combat);\n        if (ctx) result.push(ctx);\n      }\n    }\n\n    // Get default combat playlist\n    if (combat != null) {\n      const defaultMusicConfig = game.settings.get(\"vgmusic\", \"defaultMusic\");\n      if (defaultMusicConfig != null) {\n        const ctx = vgmusic.utils.PlaylistContext.fromDocument(defaultMusicConfig, \"combat\", combat);\n        if (ctx) result.push(ctx);\n      }\n    }\n\n    return result;\n  },\n\n  filterPlaylists(ctx) {\n    const combat = this.currentCombat;\n    // Remove combat track without combat\n    if (ctx.context === \"combat\" && !combat?.started) return false;\n    // Remove combat track with combat music supressed\n    if (ctx.context === \"combat\" && game.settings.get(\"vgmusic\", \"supress.combat\") === true) return false;\n\n    // Remove area track with area music supressed\n    if (ctx.context === \"area\" && game.settings.get(\"vgmusic\", \"supress.area\") === true) return false;\n\n    return true;\n  },\n\n  sortPlaylists(a, b) {\n    // Sort by current combatant\n    const combat = this.currentCombat;\n    const currentActor = combat?.combatant.actor;\n    // Immediately return current combatant's playlist\n    if (a.contextEntity === currentActor) return -1;\n    if (b.contextEntity === currentActor) return 1;\n\n    // Sort to make sure last actor's combat music will be playing\n    const silentMode = game.settings.get(\"vgmusic\", \"silentCombatMusicMode\");\n    if (silentMode === \"lastActor\") {\n      const combatants = combat.turns;\n      const startIdx = combat.current.turn;\n      if (startIdx >= 0 && combatants.length > 0) {\n        let i = startIdx;\n        while (i !== (startIdx + 1) % combatants.length) {\n          i--;\n          if (i < 0) i += combatants.length;\n\n          const actor = combatants[i].actor;\n          if (a.contextEntity === actor) return -1;\n          if (b.contextEntity === actor) return 1;\n        }\n      }\n    } else if (silentMode === \"area\") {\n      if (a.contextEntity.documentName !== \"Actor\" && a.context === \"area\") return -1;\n      if (b.contextEntity.documentName !== \"Actor\" && b.context === \"area\") return 1;\n    } else if (silentMode === \"generic\") {\n      if (a.contextEntity.documentName !== \"Actor\" && a.context === \"combat\") return -1;\n      if (b.contextEntity.documentName !== \"Actor\" && b.context === \"combat\") return 1;\n    }\n\n    // Sort by priority\n    if (a.priority !== b.priority) return b.priority - a.priority;\n    if (a.contextEntity.documentName !== b.contextEntity.documentName) {\n      const arr = this.documentNameSortPriority;\n      return arr.indexOf(b.contextEntity.documentName) - arr.indexOf(a.contextEntity.documentName);\n    }\n    return 0;\n  },\n\n  getCurrentPlaylist() {\n    const playlists = this.getAllCurrentPlaylists()\n      .filter(this.filterPlaylists.bind(this))\n      .sort(this.sortPlaylists.bind(this));\n    if (playlists.length > 0) return playlists[0];\n\n    return null;\n  },\n\n  async playCurrentTrack() {\n    if (!vgmusic.utils.isHeadGM()) return;\n\n    const newContext = this.getCurrentPlaylist();\n\n    // Switch music\n    await this.playMusic(newContext);\n  },\n\n  getPlaylistData(entity, playlistId, trackId) {\n    const playlistData = entity.getFlag(\"vgmusic\", `playlist.${playlistId}.${trackId}`);\n    if (!playlistData) {\n      return {\n        id: playlistId,\n        trackId,\n        start: 0,\n      };\n    }\n    return playlistData;\n  },\n\n  savePlaylistData(entity) {\n    if (entity instanceof Combat && game.combats.get(entity.id) == null) return;\n\n    const track = this.track;\n    if (track == null || entity == null) return;\n\n    if (vgmusic.utils.isHeadGM()) {\n      return entity.setFlag(\"vgmusic\", `playlist.${track.parent.id}.${track.id}`, {\n        id: track.parent.id,\n        trackId: track.id,\n        start: (track.sound.currentTime ?? 0) % (track.sound.duration ?? 100),\n      });\n    }\n  },\n\n  async playMusic(playlistContext) {\n    const prevTrack = this.track;\n    const newTrack = playlistContext?.track;\n    const fadingTrack = {\n      prev: this._fadingTracks.find((o) => o.track === prevTrack) != null,\n      new: this._fadingTracks.find((o) => o.track === newTrack) != null,\n    };\n\n    if (prevTrack !== newTrack && prevTrack != null) {\n      await this.savePlaylistData(this.context?.scopeEntity);\n      await prevTrack.update({ playing: false, pausedTime: null });\n      if (prevTrack.fadeDuration > 0 && !fadingTrack.prev) {\n        this._fadingTracks.push(new FadingTrack(prevTrack, prevTrack.fadeDuration));\n      }\n      this.context = null;\n    }\n\n    if (newTrack) {\n      this.context = playlistContext;\n      if (!fadingTrack.new) {\n        await newTrack.update({ playing: true, pausedTime: this.currentTrackInfo?.start ?? 0 });\n      }\n    }\n  },\n};\n\nexport class FadingTrack {\n  constructor(track, fadeDuration) {\n    this.track = track;\n    this.fadeDuration = fadeDuration || 1000;\n\n    window.setTimeout(this.delete.bind(this), this.fadeDuration + 10);\n  }\n\n  get controller() {\n    return vgmusic.utils.MusicController;\n  }\n\n  delete() {\n    const idx = this.controller._fadingTracks.indexOf(this);\n    if (idx == null) return;\n    this.controller._fadingTracks.splice(idx, 1);\n\n    // Play fading track, if appropriate\n    if (this.controller.track === this.track) {\n      this.controller.playCurrentTrack();\n    }\n  }\n}\n","export class PlaylistContext {\n  /**\n   * @constructor\n   * @param {string} context - The context for this descriptor. Either \"area\" or \"combat\" by default.\n   * @param {object} contextEntity - A document (Actor, Scene, etc.)\n   * @param {Playlist} playlist - The playlist to play for this context.\n   * @param {string} trackId - The track ID to start at with this context.\n   * @param {number} [priority=null] - The priority for this context. Plays higher priority contexts first.\n   * @param {object} [scopeEntity] - An optional scope entity on which to save progress, such as a scene or combat.\n   */\n  constructor(context, contextEntity, playlist, trackId, priority = 0, scopeEntity = null) {\n    this.context = context;\n    this.contextEntity = contextEntity;\n    this.playlist = playlist;\n    this.trackId = trackId;\n    this.priority = priority;\n    this.scopeEntity = scopeEntity;\n  }\n\n  get track() {\n    return this.playlist?.sounds.get(this.trackId);\n  }\n\n  /**\n   * @param {object} document - A document (Actor, Scene, etc.) to get a playlist context from.\n   * @param {string} [type=\"combat\"] - The type of music to get. \"area\" and \"combat\" are supported by default.\n   * @returns {PlaylistContext|null} The context, or null if no playlist was found.\n   */\n  static fromDocument(document, type = \"combat\", scopeEntity = null) {\n    // Handle Document\n    if (document instanceof foundry.abstract.Document) {\n      const playlistId = document.getFlag(\"vgmusic\", `music.${type}.playlist`);\n      const playlist = playlistId ? game.playlists.get(playlistId) : null;\n      if (!playlist) return null;\n\n      const trackId = document.getFlag(\"vgmusic\", `music.${type}.initialTrack`) || null;\n      const priority = document.getFlag(\"vgmusic\", `music.${type}.priority`) ?? 0;\n\n      return new this(type, document, playlist, trackId, priority, scopeEntity);\n    }\n\n    // Handle something else\n    else {\n      if (document.documentName === \"DefaultMusic\") {\n        const section = document.data?.vgmusic?.music?.[type];\n        if (!section) return null;\n\n        const playlistId = section.playlist;\n        const playlist = playlistId ? game.playlists.get(playlistId) : null;\n        if (!playlist) return null;\n\n        const trackId = section.initialTrack || null;\n        const priority = section.priority ?? 0;\n\n        return new this(type, document, playlist, trackId, priority, scopeEntity);\n      }\n    }\n  }\n}\n","export const VGMusic = {\n  playlistSections: {\n    // Default music playlist sections\n    DefaultMusic: {\n      combat: {\n        label: \"VGMusic.Scene.PlaylistSection.Combat\",\n        priority: -5,\n      },\n    },\n\n    // Scene playlist sections\n    Scene: {\n      area: {\n        label: \"VGMusic.Scene.PlaylistSection.Area\",\n        priority: -20,\n      },\n      combat: {\n        label: \"VGMusic.Scene.PlaylistSection.Combat\",\n        priority: -10,\n      },\n    },\n\n    // Actor playlist sections\n    Actor: {\n      combat: {\n        label: \"VGMusic.Scene.PlaylistSection.Combat\",\n        priority: 0,\n      },\n    },\n  },\n};\n","export const register = () => {\n  // Toggle area music\n  game.keybindings.register(\"vgmusic\", \"toggleAreaMusic\", {\n    name: \"VGMusic.CONTROLS.ToggleAreaMusic.Name\",\n    onDown: () => {\n      game.VGMusic.controls.toggleAreaMusic();\n    },\n  });\n\n  // Toggle combat music\n  game.keybindings.register(\"vgmusic\", \"toggleCombatMusic\", {\n    name: \"VGMusic.CONTROLS.ToggleCombatMusic.Name\",\n    onDown: () => {\n      game.VGMusic.controls.toggleCombatMusic();\n    },\n  });\n};\n\nexport const toggleAreaMusic = async function () {\n  const value = game.settings.get(\"vgmusic\", \"supress.area\");\n  await game.settings.set(\"vgmusic\", \"supress.area\", !value);\n  ui.controls.initialize();\n};\n\nexport const toggleCombatMusic = async function () {\n  const value = game.settings.get(\"vgmusic\", \"supress.combat\");\n  await game.settings.set(\"vgmusic\", \"supress.combat\", !value);\n  ui.controls.initialize();\n};\n","/**\n * Author: Furyspark\n * Software License: MIT\n */\n\n// Import JavaScript modules\nimport { registerSettings } from \"./settings.mjs\";\nimport { preloadTemplates } from \"./preloadTemplates.mjs\";\nimport * as patch from \"./patch/_module.mjs\";\nimport * as utils from \"./utils/_module.mjs\";\nimport * as applications from \"./applications/_module.mjs\";\nimport { VGMusic } from \"./config.mjs\";\nimport * as controls from \"./controls.mjs\";\n\nexport { applications, utils, VGMusic as config };\n\nglobalThis.vgmusic = {\n  applications,\n  utils,\n  config: VGMusic,\n  controls,\n};\n\n// Initialize module\nHooks.once(\"init\", async () => {\n  if (typeof libWrapper !== \"function\") return;\n  console.log(\"vgmusic | Initializing vgmusic\");\n\n  // Assign custom classes and constants here\n  CONFIG.VGMusic = VGMusic;\n\n  // Register custom module settings\n  registerSettings();\n  vgmusic.controls.register();\n\n  // Register sockets\n\n  // Preload Handlebars templates\n  await preloadTemplates();\n});\n\nHooks.once(\"setup\", () => {});\n\n// When ready\nHooks.once(\"ready\", async () => {\n  // Do anything once the module is ready\n  if (typeof libWrapper !== \"function\") return;\n\n  // Patch stuff\n  for (const fn of Object.values(patch)) {\n    fn();\n  }\n});\n\n// Add any additional hooks if necessary\nHooks.on(\"updateCombat\", (combat, updateData) => {\n  // If the combat turn is changed\n  if (combat.started && (updateData.turn != null || updateData.round != null)) {\n    utils.MusicController.playCurrentTrack();\n  }\n});\n\nHooks.on(\"deleteCombat\", () => {\n  utils.MusicController.playCurrentTrack();\n});\n\nHooks.on(\"renderSceneConfig\", (app, html) => {\n  // Disable core stuff\n  const elem = html.find(`select[name=\"playlistSound\"]`).parent();\n\n  const elemStr =\n    `<button type=\"button\" data-action=\"vgmusic-scene\"><i class=\"fas fa-music\"></i>` +\n    `${game.i18n.localize(\"VGMusic.SceneMusic\")}</button>`;\n  elem.after(elemStr);\n\n  html.find(`button[data-action=\"vgmusic-scene\"]`).on(\"click\", (event) => {\n    event.preventDefault();\n    new applications.VGMusicConfig(app.object).render(true);\n  });\n});\n\nHooks.on(\"canvasReady\", () => {\n  utils.MusicController.playCurrentTrack();\n});\n\nHooks.on(\"updateScene\", async (scene, updateData) => {\n  if (\"active\" in updateData) {\n    if (updateData.active !== true) {\n      await scene.unsetFlag(\"vgmusic\", \"playlist\");\n    }\n    utils.MusicController.playCurrentTrack();\n  }\n});\n"],"names":["utils.MusicController","applications.VGMusicConfig"],"mappings":"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"}